/**
 */
class Candy {

  static int TOP,LEFT,BOTTOM,RIGHT;
  field int x,y;
  field Array box;

  /**
   */
  constructor Candy ctor(int column, int row, int size) {
    // stores top,right,bottom,left
    let top=0;
    let left=1;
    let bottom=2;
    let right=3;
    let box= Array.new(4);

    let x= column;
    let y= row;

    let box[LEFT]=x;
    let box[TOP]=y;
    let box[RIGHT]=x+size - 1;
    let box[BOTTOM]=y+size - 1;

    do show();
    return this;
  }

  /**
   */
  method Array bbox() { return box; }

  /**
   */
  method void finz() {
    do Memory.deAlloc(this);
    do Memory.deAlloc(box);
    return;
  }

  /**
   */
  method int _draw(boolean b) {
    do Screen.setColor(b);
    do Screen.drawRectangle(box[3],box[0], box[1], box[2]);
    return this;
  }

  /**
   */
  method int hide() { return _draw(false); }

  /**
   */
  method int show() { return _draw(true); }

  /**
   */
  method void position() {
    var int a;
    var boolean exit;
    let exit = true;
    while (exit) {
      let x = Math.multiply(x,21);
      let a = Math.divide(x,512);
      let a = Math.multiply(a,512);
      let x = x - a;
      let y = Math.multiply(y,10);
      let a = Math.divide(y,256);
      let a = Math.multiply(a,256);
      let y = y-a;
      if ((x<(5+big)) |(y<(5+12+big))) {
        let exit = true;
        if (((x>(511-5-big))) |
            ((y>(256-5-big)))) {
          let x = 30;
          let y = 30;
        }
      } else {
        let exit = false;
      }
    }
    do show();
    return;
  }

}

